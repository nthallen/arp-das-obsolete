#----------------------------------------------------------------
# OSU.1
#	Inclusion Codes within this configuration file include:
#	  O: OS Installation: OS, TCP/IP, rundos
#	  O: OS, TCP/IP User, rundos (separated by config file)
#	  U: Upgrade (for temporary inclusion in primary file)
#	  Q: Server files (requires 'q' exclusion also)
#	  C: C Compiler Executables
#	  c: C Compiler Executables Soft-Linked
#	  L: Libraries and Include Files
#	     (including /usr/local/include & lib)
#	  l: Libraries and Include Files soft-linked
#        (requires the 'l' exclusion also)
#	  S: Watcom SQL
#	  W: Windows RT
#	  w: Windows Soft-Linked
#	  K: Windows TK
#	  k: Windows tk Soft-Linked
#	  T: TCP/IP Server (Requires t exclusion)
#	  B: /usr/local/bin
#	  b: /usr/local/bin soft-linked
#	  M: /usr/GNU/Emacs/emacs-18.55-qnx
#	  m: /usr/GNU/Emacs/emacs-18.55-qnx soft-linked
#	  F: Free Unix Utilities
#	  f: Free Unix Utilities soft-linked (incompatible with T)
#	  E: Embedded System for flight experiments (F was taken!)
#	  H: Documentation directories: man and doc
#	  h: Documentation directories soft-linked
#	  A: General Release (Thompson Driver...)
#
# Exclusions included here:
#     n: Norton's System
#     e: Eileen's System
#     q: A Server (Q)
#     t: A TCP/IP Server (T)
#     f: A flight computer
#     l: A node with the 'l' config code
#     i: Only in-house (currently used with H, Q, O)
#     h: Systems with Non-ARP Hardware
#----------------------------------------------------------------

*:n

{ /etc/
  { Oq:c group opasswd oshadow passwd profile shadow }
  { Oq:s motd }
  { Qi:c update_net }
}
{ /etc/config/ O:c
  netmap netmaptrap node.map sysinit.all TZ.init
}

# This is duplicated from OSU.423.1
{ O:c /usr/spool }
{ /usr/spool/ Oq:s Q:c mail cron }
{ /usr/spool/ Oq:d Q:c lp }
{ /usr/spool/ O:d T:c mqueue }
{ /usr/spool/ O:d queue }
{ O:c /usr/bin/
	# Some useful utilites from /usr/free/qnx4...
	dmpinfo fsysinfo sysmon sysres
}

{ Hi:r hi:s /usr/man }

# For the time being, don't touch Nort's /usr/local/man
{ *:n Hin:r hin:s /usr/local/man }
{ B:c b:s /usr/local/bin }

# /usr/lib is set up in OSU.423.1 and always copied
{ L:c l:s /usr/local/lib }
{ L:c l:s /usr/include }
{ L:c l:s /usr/local/include }

#----------------------------------------------------------------
# TCP/IP user files: The whole directory is usually soft-linked
# The files should be copied if T is asserted or softlinked if
# F is asserted. F is not meant to imply that these utilities are
# free. If F is asserted, /usr/ucb/ will exist and not be a
# soft link, so we must soft link each utility separately
#----------------------------------------------------------------
{ /usr/ucb/ *:n Ft:s Q:n T:S/usr/tcprt/current/usr/ucb/
  arp ftp hostname lpr lprc lprq lprrm netstat nslookup
  ping rcp rlogin rsh telnet traceroute
  *:s/usr/local/sendmail/sendmail
  *n:n
  Fi:s/usr/local/sendmail/sendmail
  Tni:S/usr/local/sendmail/sendmail
	sendmail mailq newaliases
  *:n Ti:S/usr/tcprt/current/usr/ucb/rmail.sendmail rmail.sendmail
}
{ *:s/usr/ucb/rmail.sendmail Q:n Ti:S/usr/ucb/rmail.sendmail
	/usr/bin/rmail
}
{ /etc/ *t:s T:n
	resolv.conf services protocols
}

{ /usr/bin/ *:d # obsolete location for TCP/IP files
  arp ftp hostname lpr lprc lprq lprrm netstat nslookup
  ping rcp rlogin rsh telnet traceroute
  mailq mount_nfs nfsstat newaliases ripquery showmount
  snmpget snmpnetstat snmptest snmptrap snmpwalk tn3270
  tftp rpcgen ruptime rwho rmail.sendmail

  # Leave an obsolete link to the new sendmail.
  # If TQ, use S. If Q, do nothing. else, do s.
  *:n
  Ti:S/usr/local/sendmail/sendmail
  *q:s/usr/local/sendmail/sendmail
  sendmail
}
{ /etc/ *:d # obsolete location for some other stuff:
  hostname ping arp netstat traceroute
}

#----------------------------------------------------------------
# Elm distribution:
#----------------------------------------------------------------
{ /usr/local/bin/ Bif:c b:n
  checkalias elm elmalias frm listalias messages newalias
  newmail printmail prlong readmsg
  *:n Qif:c b:n
  answer fastmail filter
}
{ /usr/bin/ *:d
  checkalias elm filter frm listalias messages newalias
  newmail printmail readmsg
}
#----------------------------------------------------------------
# Metamail distribution: Soft link unless server
#----------------------------------------------------------------
{ /usr/local/bin/ Bif:s Qif:c b:n
  audiocompose audiosend extcompose getfilename mailserver
  mailto mailto-hebrew metamail metasend mimencode mmencode
  patch-metamail rcvAppleSingle richtext richtoatk showaudio
  showexternal shownonascii showpartial showpicture sndAppleSingle
  splitmail sun-audio-file sun-message.csh sun-to-mime sun2mime
}

#----------------------------------------------------------------
# Windows Stuff:
#----------------------------------------------------------------
{ Wn:r /usr/lib/windows/apps/rtg }
{ Wi:c /usr/lib/windows/apps/Olfm/olfm.cfg
       /usr/lib/windows/apps/Olwm/olwm.list
}

#----------------------------------------------------------------
# Public man stuff:
# /usr/ucb includes some of the F utilities. At issue is under
# what circumstances we should force the existence of /usr/ucb
# F and O interact in this area because O includes TCP/IPs stuff
# If F is asserted, we must create /usr/ucb and hence must include
# softlinks to all the tcp/ip stuff on the server.
# I think the answer is we should soft-link /usr/ucb for O (everyone)
# *unless* F or T are asserted
#----------------------------------------------------------------
{ *n:s F:n Q:n T:n /usr/ucb }
{ F:c /usr/ucb/
  catman catwhatis cfman countman makewhatis straycats
}

#----------------------------------------------------------------
# General 3rd-party and public utilities:
#----------------------------------------------------------------
{ /usr/local/bin/ F:c f:s b:n
  # general utilities
  # cppstdin  # simple wrapper for C preprocessor.
  gunzip gzip gzexe gz printstat rb rc rx rz sb sx sz
  tcsh uud uue zcat zforce znew zmore zgrep zcmp zdiff
}

#----------------------------------------------------------------
# Perl
#----------------------------------------------------------------
{ /usr/local/bin/
  # Perl itself will be part of the standard B distribution
  B:w Bn:s Fn:c fn:s b:n
  perl5.004 { Fn:Hperl5.004 b:n perl }

  # would like to limit installation of these to servers
  # Copy only if FQ, link if fQ
  Bn:n Fn:c fn:s Fnq:d fnq:d b:n
  a2p c2ph find2perl h2ph h2xs perlbug perldoc
  pl2pm pod2man pod2html pod2latex pod2text splain s2p
  { Fn:Hc2ph Fnq:d b:n pstruct }
}
{ /usr/local/lib/ Lln:s Fln:r fln:s l:n perl5 }

#----------------------------------------------------------------
# man stuff
#----------------------------------------------------------------
{ /usr/local/bin/  Hi:c hi:s b:n man apropos whatis whman }

#----------------------------------------------------------------
# groff and gs stuff
#----------------------------------------------------------------
{ { /usr/local/bin/ F:c f:s b:n
	addftinfo afmtodit
	geqn gindxbib glookbib gneqn gnroff gpic grefer grodvi groff
	grog grotty gs gsbj gsbmp16 gscprint gsdj gslj gslp gsnd gsoelim
	gspcxmview gspcxview gsposit.sh gsprint gsview gtbl gtroff
	ps2ascii ps2epsi pfbtops psbb texi2roff tfmtodit
  }
  { /usr/local/lib/ Fl:r fl:s l:n groff ghostscript }
}

#----------------------------------------------------------------
# Emacs
#----------------------------------------------------------------
{ /usr/local/bin/ M:c m:s b:n emacs etags }
{ Bif:c b:n /usr/local/bin/uemacs }
{ M:r m:s /usr/GNU/Emacs }
{ Blif:r l:n /usr/local/lib/ue }

#----------------------------------------------------------------
# gopher
#----------------------------------------------------------------
{ /usr/local/bin/ Bqif:s Qi:c b:n gopher gophfilt }
{ /usr/local/lib/ Belqf:s Qi:c l:n
	gopher.hlp gopher.rc gopherremote.rc
}

#----------------------------------------------------------------
# lynx
#----------------------------------------------------------------
{ /usr/local/bin/ Bqf:s Q:c b:n lynx }
{ Ql:c l:n /usr/local/lib/lynx/
  lynx.cfg mailcap mime.types
}

#----------------------------------------------------------------
# In-house creations
#----------------------------------------------------------------
{ /usr/local/bin/
  #----------------------------------------------------------------
  # Created by Nort
  #----------------------------------------------------------------
  { B:w Bn:c
	SerClient demote fixdisk flight.sh flttime getcon
	namewait parent password pick_file promote reboot
	reduce ring ringtap saverun settime startdbr stopclock unsu
	winsetsize
  }
  { A:w An:c ttdriver }
  { Bf:w Bnf:c E:n  # General Utilities not for flight systems
	Backup3 Copyin3 Make Makelib Makercs
	SerServer appclone appgen arc
	{ Bf:w Bnf:s Q:c E:n archive }
	cls cmdgen cycle data_attr dircksum dircompare
	distribute extract ext2rtg
	fld_transfer flinit
	{ Bf:w Bnf:s Q:c E:n getarc }
	lprint mkdoit mkdoit2 noderpt osupdate
	oui snafu snafu.cfg solfmt sps2mat table
	tmcV1R3 tmcV1R4 { Bf:HtmcV1R4 E:n tmc }
	tmg2tmc tmcalgo tmcalgoR1 unarc vt100
  }
  { Bh:w Bnh:c  # Created by Nort, Harvard hardware-specific
	  idx64 indexer intserv subbus_pi subbus_sc subbus_104
	  timerbd tmrtest
	E:n    # Diagnostics, etc. not for flight systems
	  bckpln bckpln_pi digital2 dtoatest hangup idx64cfg
	  o3ctdiag mount_od odinit umount_od scdebug
  }
  { Bni:d viewmet odin odout }

  #----------------------------------------------------------------
  # Created by Eileen
  #----------------------------------------------------------------
  { B:w Be:c
	bfr cmdctrl color.cfg fctr lfctr lgr memo mono.cfg nav navtest
	pif piftest playback rdr scrpaint serout soldrv spwnr topaz
	
	E:n # These don't go on flight systems:
	ascii.qnx scrdes scrdes.cfg scrdes0.hlp scrdes1.hlp scrdes2.hlp
	scrdes3.hlp scrdes4.hlp scrdes5.hlp scrdes6.hlp serin sps2step
	sps2step.exe step.def step2sps step2sps.exe
  }
  { Bh:w Beh:c # Harvard Hardware only
	dccc scdc

	E:n # not to flight systems:
	card digital3 sccfg scdiag.cfg scicmd syscon syscon.hlp
  }
  { B:c E:n calendar memos }
  { B:d sysmon } # moved to /usr/bin
  { Hn:c hn:s doc }
}
{ /usr/local/include/
  { *:w *n:n An:c ttdriver.h }
  { L:w Le:c
	beeps.h break.h cc.h cmdctrl.h company.h curses.h dac.h das.h
	dbr.h dbr_mod.h dccc.h eillib.h file.h filename.h frame.h
	get_priv.h globmsg.h lat.h memo.h msg.h nav.h pif.h port_types.h
	reboot.h reply.h rollover.h scdc.h serial.h serin.h sights.h
	soldrv.h solfmt.h sound_esc.h sounds.h spawn.h stream.h symname.h
	timing.h topaz.h usage.h vector.h
  }
  { L:w Ln:c
	average.h cltsrvr.h cmdalgo.h collect.h compiler.h diaglib.h
	dtoe.h gpib232.h idx64.h indexer.h intserv.h linefind.h
	ll_of_str.h memlib.h nl_cons.h nl_dsp.h nl_dsp_dbl.h nl_dsp_ul.h
	nortlib.h oui.h rational.h rtgapi.h seq_ss.h snafuerr.h snfbatch.h
	ssp.h subbus.h timerbd.h tma.h tmctime.h
  }
  { Ln:r oui }
}
{ # Propose to obsolete entirely /usr/local/include/use }

{ /usr/local/lib/
  { Qln:r l:n das_html }
  { Ll:w Lle:c l:n
	cursesl.lib cursess.lib
	dasl.lib dass.lib
	dbrl.lib dbrs.lib
	eillibl.lib eillibs.lib
  }
  { Ll:w Lln:c l:n
	memlibl.lib memlibs.lib
	nortlibl.lib nortlibs.lib
	snfbtchl.lib snfbtchs.lib
	sspl.lib ssps.lib
	subbusl.lib subbuss.lib
  }
}

{ /usr/local/lib/src/
  { *n:d l:n cltmain.c cmdmain.c srvmain.c }
  { Blf:w Bnlf:c l:n mkdoit2.sh }
  { Ll:w Lle:c l:n doc2roff.awk }
  { Ll:w Lln:c l:n
	appgen.mk cmdgen.skel colmain.skel copyin.mk cycle.awk dccc.por
	doc2txt.awk edf2ext.awk edf2oui.awk extmain.skel fld2disp.awk
	getopt.c idx64.cmd libmaint.mk library.mk maint.mk3 mkdoit2.awk
	noderpt.awk prt2cmd.awk prt2dccc.awk prt2edf.awk prt2tmc.awk
	rcsid.c rcsmaint.mk root.cmd slp2cmd.awk slp2sol.awk tmg2tmc.awk
	{ *:n Llh:w Llnh:c l:n E:n idx64cfg.awk # Harvard, non-flight
	}
  }
  { Lln:d Ql:w Qln:c l:n
	netinstall upgrade.cfg upgrade.fld
	osupdate.awk update_host update_node # (!) obsolete
  }
}

#----------------------------------------------------------------
# doc stuff: mostly obsolete
#----------------------------------------------------------------
{ hnl:s l:n /usr/local/lib/man }
{ /usr/local/lib/man/ Hnl:c l:n
	das.doc das_dev.doc das_hw.doc das_sw_dev.doc doc.doc doclist.doc
	nl_make_name.doc oui.doc pick_file.doc read_ack.doc read_subbus.doc
	template.doc write_ack.doc write_subbus.doc subbusr4.doc rtg.doc
	indxr.doc indxr64.doc
  Hnl:r abc
}
